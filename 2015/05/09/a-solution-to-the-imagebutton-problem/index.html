<!DOCTYPE html>
<html lang="en-EN" prefix="og: http://ogp.me/ns#">
<head>
    <title>A Solution to the ImageButton Problem – KlaasNotFound – Ramblings about software, design and music.</title>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
    <link rel="apple-touch-icon" href="/assets/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-touch-icon-114x114.png">
    
    <meta name="description" content="These days, Android provides a lot of neat tools to set up layouts, manage assets and style views. However, creating
a consistent feel of buttons (specifically ImageButtons) across an app is still not an easy task and may require you
to create a lot of redundant assets and XML code.

" />
    <meta property="og:description" content="These days, Android provides a lot of neat tools to set up layouts, manage assets and style views. However, creating
a consistent feel of buttons (specifically ImageButtons) across an app is still not an easy task and may require you
to create a lot of redundant assets and XML code.

" />
    
    
    <meta name="og:image" content="/assets/content/imagebutton_01.png" />
    
    <meta name="author" content="KlaasNotFound" />
    
    <meta property="og:title" content="A Solution to the ImageButton Problem" />
    <meta property="twitter:title" content="A Solution to the ImageButton Problem" />
    
        <link rel="stylesheet" type="text/css" href="/semantic/dist/semantic.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/main.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/monokai.css"/>
    

    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>

<!-- Top Menu -->
<div class="ui top fixed hidden main menu">
    <div class="ui container">
        <h2>KNF</h2>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about/">About</a></li>
        </ul>
    </div>
</div>

<!-- Masthead -->
<div class="ui main container masthead">
    <div class="ui stackable grid">
        <div class="three wide column">
            <div class="ui dropdown">
                <a href="https://twitter.com/klaasnotfound" target="_blank" class="ui tiny image">
                    <img src="/assets/img/klaas_header.png" style="margin: 16px 0 0 16px;"/>
                </a>
                <div class="menu">
                    <div class="item">
                        <a class="twitter-timeline" href="https://twitter.com/klaasnotfound"
                           data-widget-id="727446477300240384">Tweets von @klaasnotfound </a>
                        <script>!function (d, s, id) {
                            var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
                            if (!d.getElementById(id)) {
                                js = d.createElement(s);
                                js.id = id;
                                js.src = p + "://platform.twitter.com/widgets.js";
                                fjs.parentNode.insertBefore(js, fjs);
                            }
                        }(document, "script", "twitter-wjs");</script>
                    </div>
                    <div class="item"
                         onClick="window.open('https://twitter.com/intent/follow?screen_name=klaasnotfound');">
                        Follow me on <i class="twitter icon"></i></div>
                </div>
            </div>
        </div>
        <div class="ten wide center aligned column">
            <a href="/" class="ui large centered image">
                <img src="/assets/img/klaasnotfound_title.svg"/>
            </a>
            <h3>I create things. I blog about it. <span class="underline">Sometimes.</span></h3>
        </div>
    </div>
</div>

<!-- Page Menu -->
<div class="ui page menu">
    <div class="ui container">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about/">About</a></li>
        </ul>
    </div>
</div>

<div class="ui main page">
    <div class="ui text container">
        <div class="ui segment" id="content">
            <div class="right social ui rail">
    <div class="ui sticky segment">
        <a href="https://twitter.com/intent/tweet?text=A+Solution+to+the+ImageButton+Problem&url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F&via=klaasnotfound&related=klaasnotfound" rel="nofollow" target="_blank" title="Share on Twitter"><i class="large twitter icon"></i></a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F&title=A+Solution+to+the+ImageButton+Problem&source=http://www.klaasnotfound.com" rel="nofollow" target="_blank" title="Share on LinkedIn"><i class="large linkedin icon"></i></a>
        <a href="https://facebook.com/sharer.php?u=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F" rel="nofollow" target="_blank" title="Share on Facebook"><i class="large facebook icon"></i></a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F" rel="nofollow" target="_blank" title="Share on Google+"><i class="large google plus icon"></i></a>
    </div>
</div>

<div class="social bar">
    <div class="ui four column divided center aligned grid">
        <div class="column">
            <a href="https://twitter.com/intent/tweet?text=A+Solution+to+the+ImageButton+Problem&url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F&via=klaasnotfound&related=klaasnotfound"
               rel="nofollow" target="_blank" title="Share on Twitter"><i class="large twitter icon"></i></a>
        </div>
        <div class="column">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F&title=A+Solution+to+the+ImageButton+Problem&source=http://www.klaasnotfound.com" rel="nofollow" target="_blank" title="Share on LinkedIn"><i class="large linkedin icon"></i></a>
        </div>
        <div class="column">
            <a href="https://facebook.com/sharer.php?u=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F" rel="nofollow" target="_blank" title="Share on Facebook"><i class="large facebook icon"></i></a>
        </div>
        <div class="column">
            <a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.klaasnotfound.com%2F2015%2F05%2F09%2Fa-solution-to-the-imagebutton-problem%2F" rel="nofollow" target="_blank" title="Share on Google+"><i class="large google plus icon"></i></a>
        </div>
    </div>
</div>
            <div class="ui big teal ribbon label">9 May 2015</div>
            <h2>A Solution to the ImageButton Problem</h2>
            
            <blockquote><b>tl;dr</b> Below, you can grab a simple Java class that makes all the ImageButtons in your Android app have a nice pressed and disabled state.</blockquote>
            

            <p>These days, Android provides a lot of neat tools to set up layouts, manage assets and style views. However, creating
a consistent feel of buttons (specifically <strong>ImageButtons</strong>) across an app is still not an easy task and may require you
to create a lot of redundant assets and XML code.</p>

<p>Suppose I want the following look for a Facebook-Login button:</p>

<p><img src="/assets/content/imagebutton_01.png" alt="" class="ui big centered image" /></p>

<p>The pattern that is used here is actually rather simple: When pressed, dim the image down by 50%, when disabled, dim
it up by 50%. In fact, I would like to have this same behavior for any button in my app.</p>

<p>While other operating systems like iOS automatically provide a visually intuitive appearance for the <em>pressed</em> and
<em>disabled</em> state of image buttons, Android does not. In theory, you would have to style each and every button with a
state list drawable XML, like so:</p>

<div class="highlight"><pre><code class="language-xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;selector</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">&quot;@drawable/b_login_facebook_disabled&quot;</span> <span class="na">android:state_enabled=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">&quot;@drawable/b_login_facebook_pressed&quot;</span> <span class="na">android:state_enabled=</span><span class="s">&quot;true&quot;</span> <span class="na">android:state_pressed=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">&quot;@drawable/b_login_facebook&quot;</span> <span class="na">android:state_enabled=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/selector&gt;</span></code></pre></div>

<p>Not only would you have to create such a file for each image button in your app, but you’d also have to provide
three images (one for each state), which unnecessarily bloats your assets.</p>

<p>The actual problem in creating the look described above is that there is no way to influence the alpha value of your
foreground image in the state list XML. If you roam about on StackOverflow, you’ll find different suggestions on how
to solve this problem, including
<a href="http://stackoverflow.com/questions/6379883/automatically-alter-button-background-and-text-appearance-when-pressed-like-ios/6873930#6873930">wrapping each button in a <strong>LinearLayout</strong></a>
(yikes) or
<a href="http://stackoverflow.com/questions/6379883/automatically-alter-button-background-and-text-appearance-when-pressed-like-ios/15139615#15139615">manually setting an <strong>OnTouchListener</strong> for each button</a>
(ouch).</p>

<p>I didn’t quite like either of them, so I went ahead and created PressableImageButton. It inherits Android’s
ImageButton and simply alters the background color and foreground alpha when the button is pressed or disabled. Once
you add this class to your project, you only need to change your ImageButton XML tags to <yourpackage>.PressableImageButton, like so:</yourpackage></p>

<div class="highlight"><pre><code class="language-xml"><span class="nt">&lt;com.your.project.PressableImageButton</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/bLoginFacebook&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;80dp&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;80dp&quot;</span>
    <span class="na">android:src=</span><span class="s">&quot;@drawable/b_login_facebook&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>That’s it. No extra layouts, no background state lists, no additional code, nada.</p>

<p>You may</p>

<blockquote>
  <p><a href="https://gist.github.com/klaas-loclet/6f3441d8f32d4b93900c">Grab the source over here</a>.</p>
</blockquote>

<p><strong>UPDATE 2015-05-24</strong>: I enhanced the class to deal with transparent buttons. If you have a button image with
transparency and you don’t want the rectangular background to show, add</p>

<div class="highlight"><pre><code class="language-xml"><span class="nt">&lt;com.your.project.PressableImageButton</span>
    <span class="na">android:background=</span><span class="s">&quot;@null&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>to the XML definition of your button. This will cause the underlying background to shine through.</p>


            
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'klaasnotfound';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

        </div>
    </div>
</div>


<div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
        <div class="ui horizontal inverted small gray divided item list">
            
            <div class="item"><a href="https://twitter.com/intent/follow?screen_name=klaasnotfound" target="_blank">
                Follow me on<i class="twitter icon"></i></a></div>
            <div class="item">&copy; 2016 klaasnotfound.com</div>
        </div>
    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="/semantic/dist/semantic.min.js"></script>
<script src="/assets/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-77167666-2', 'auto');
    ga('send', 'pageview', {
        'page': '/2015/05/09/a-solution-to-the-imagebutton-problem/',
        'title': 'A Solution to the ImageButton Problem'
    });
</script>

</body>
